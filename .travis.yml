# This is the config file for building and testing Geo::GDAL with Travis-ci.org

#sudo: required
#dist: trusty

os:
  - linux
#  - osx

language: perl
perl:
  - "5.10"

before_install:
  - sudo apt-get install libexpat-dev libpq-dev pdl
  - cpanm Alien::Build
  - cpanm ExtUtils::MakeMaker
  - cpanm HTTP::Tiny
  - cpanm PkgConfig
  - cpanm Sort::Versions
  - cpanm https://github.com/shawnlaffan/perl-alien-gdal.git
#  - svn co https://github.com/shawnlaffan/perl-alien-gdal.git/trunk alien-gdal; cd alien-gdal; perl Makefile.PL; make install; cd ..
#  - sudo add-apt-repository ppa:ubuntugis/ubuntugis-unstable -y
#  - sudo apt-get update
#  - sudo apt-get install libgdal-dev # is an older version

install:
  - cpanm -v --installdeps --notest .

script: "perl Makefile.PL; make test"

branches:
  only:
    - master

notifications:
  recipients:
    - ari.jolma@gmail.com
  email:
    on_success: change
    on_failure: always
